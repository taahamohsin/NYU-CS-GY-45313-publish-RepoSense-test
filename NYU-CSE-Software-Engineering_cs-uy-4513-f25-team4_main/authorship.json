[{"path":"README.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"# üìà Investra ‚Äì Stock Trading Analyzer","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"## üìå Project Overview","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"Investra is a **multi-module Software-as-a-Service (SaaS) stock trading platform** built with Ruby on Rails.  ","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"The platform is designed for **individual investors, associate traders, portfolio managers, and system administrators** to track trades, manage portfolios, and analyze market data with ease.  ","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"This project was developed as part of **CS-UY 4513 ‚Äì Software Engineering** under the guidance of **Professor Dr. DePasquale**.","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"---","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"## üë• Developers","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"- **Chris Brasil**","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"- **Dhruv Gupta**  ","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"- **Hanqi Liu**  ","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"- **Hongyi Wu**  ","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"- **Michael Bian**  ","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"- **Sania K. Awale**","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"---","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"## üöÄ Features","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"- **User \u0026 Identity Management**  ","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"  Secure authentication and role-based permissions for traders, associates, managers, and admins.","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"- **Trading \u0026 Portfolio Management**  ","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"  Place buy/sell orders, track performance, and monitor portfolios.","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"- **Market Data Integration**  ","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"  Real-time and historical stock data, financial reports, and AI/ML-powered predictions.","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"- **Associate Analytics**  ","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"  Performance tracking, reporting, and dashboards for managers and system-wide analytics.","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"  ","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"WHRANKY"},"content":"- **For detail feature setup**","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"WHRANKY"},"content":"  [Check here](./docs/investra_features.md)","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"---","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"## üõ†Ô∏è Tech Stack","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"- **Language:** Ruby  ","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"- **Framework:** Ruby on Rails (latest stable version)  ","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"- **Database:** MySQL  ","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"- **Testing:** RSpec  ","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"---","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"## üìÇ Project Modules","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"1. **User \u0026 Identity Management** ‚Äì authentication, registration, role management  ","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"2. **Trading \u0026 Portfolio Management** ‚Äì order placement, portfolio tracking  ","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"3. **Market Data** ‚Äì stock information, predictions, and reports  ","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"4. **Associate Analytics** ‚Äì dashboards, performance summaries  ","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"---","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"## üì° API Overview","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"Each module exposes a **RESTful API** for inter-module communication and external integration.  ","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"Some core endpoints include:","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"- **User API**: `/api/users/register`, `/api/users/login`, `/api/users/me`  ","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"- **Stock Management API**: `/api/orders`, `/api/stock/sell/:id`  ","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"- **Portfolio API**: `/api/portfolios/:userId`, `/api/portfolios/:id/holdings`  ","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"- **Associate API**: `/api/associates`, `/api/associates/:id`  ","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"- **Trade/Order API**: `/api/orders/:id`, `/api/orders?userId\u003d123`  ","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"---","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"## üì¶ Deliverables","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"- Complete source code with proper documentation  ","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"- API documentation  ","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"- Final project presentation and demo  ","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"---","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"Thesclhy"},"content":"## ‚ñ∂Ô∏è Local Run (Docker)","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"Thesclhy"},"content":"- See `investra/README.md` for Docker-based local startup instructions and dev/test admin login details.","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"Thesclhy"},"content":"","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"## üìÖ Course Information","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"- **Course:** CS-UY 4513 ‚Äì Software Engineering  ","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"- **Professor:** Dr. DePasquale  ","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"- **Date:** September 27, 2025  ","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"---","isFullCredit":false}],"authorContributionMap":{"Thesclhy":3,"-":76,"WHRANKY":3}},{"path":"docs/buying_and_selling.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"WHRANKY"},"content":"# Buying and Selling","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"WHRANKY"},"content":"## User Story","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"WHRANKY"},"content":"As a registered investor,","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"WHRANKY"},"content":"I want to view market stocks, uy and sell them easily through the platform,","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"WHRANKY"},"content":"so that I can manage my investment portfolio efficiently and keep my account information up to date.","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"WHRANKY"},"content":"## Feature Description","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"WHRANKY"},"content":"The Buying and Selling feature allows users to:","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"WHRANKY"},"content":"- Search for specific stocks using a search box.  ","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"WHRANKY"},"content":"- View lists of available stocks in the market and personal owned stocks.  ","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"WHRANKY"},"content":"- View personal balance in real time.  ","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"WHRANKY"},"content":"- Execute buy and sell transactions through interactive buttons.  ","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"WHRANKY"},"content":"- See automatically refreshed data after each transaction (or manually refresh if needed).","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"WHRANKY"},"content":"1. ** Stock Search and Display (H)**  ","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"WHRANKY"},"content":"    Given the user is logged in,  ","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"WHRANKY"},"content":"    When the user enters a stock name or symbol in the search box,  ","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"WHRANKY"},"content":"    Then the system displays matching stocks from the market database along with current price and quantity available.","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"WHRANKY"},"content":"2. ** Buying Stocks (H)**  ","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"WHRANKY"},"content":"    Given the user is logged in and has sufficient balance,  ","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"WHRANKY"},"content":"    When the user selects a stock, clicks ‚ÄúBuy,‚Äù and enters a valid quantity,  ","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"WHRANKY"},"content":"    Then the system locks the transaction, deducts the total amount from the user‚Äôs balance, updates the stock database (reducing available quantity), adds the purchased quantity to the user‚Äôs portfolio, unlocks the transaction, and confirms success.","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"WHRANKY"},"content":"3. ** Selling Stocks (H)**  ","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"WHRANKY"},"content":"   Given the user owns sufficient quantity of a specific stock,  ","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"WHRANKY"},"content":"   When the user clicks ‚ÄúSell‚Äù and enters the desired quantity,  ","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"WHRANKY"},"content":"   Then the system locks the transaction, removes the stock quantity from the user‚Äôs portfolio, adds the sold amount to the market database, credits the user‚Äôs balance, unlocks the transaction, and displays a confirmation.","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"WHRANKY"},"content":"4. ** Insufficient Funds or Stock Quantity (S)**  ","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"WHRANKY"},"content":"   Given the user tries to buy a stock with a cost higher than their available balance,  ","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"WHRANKY"},"content":"   Or the user tries to sell more shares than they own,  ","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"WHRANKY"},"content":"   Then the system prevents the transaction and displays an appropriate error message (‚ÄúInsufficient balance‚Äù or ‚ÄúInsufficient shares‚Äù).","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"WHRANKY"},"content":"5. ** Real-Time Balance and Portfolio Refresh (H)**  ","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"WHRANKY"},"content":"   - After any buy or sell transaction,  ","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"WHRANKY"},"content":"   - The system must update and refresh the user‚Äôs balance, owned stock list, and market stock list automatically (or allow manual refresh if necessary),  ","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"WHRANKY"},"content":"   - So that the displayed data remains accurate and synchronized.","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"WHRANKY"},"content":"6. ** Concurrency and Data Integrity (H)**  ","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"WHRANKY"},"content":"   - When multiple users attempt to buy or sell the same stock simultaneously,  ","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"WHRANKY"},"content":"   - The system must lock transactions appropriately to prevent race conditions,  ","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"WHRANKY"},"content":"   - Ensuring that the total stock quantities and balances remain consistent.","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"WHRANKY"},"content":"## MVC","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"WHRANKY"},"content":"### Model","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"WHRANKY"},"content":"The feature will involve the following data models:","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"WHRANKY"},"content":"- **User model** with attributes: `username:string`, `email:string`, `balance:decimal`.  ","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"WHRANKY"},"content":"- **Stock model** with attributes: `symbol:string`, `name:string`, `price:decimal`, `available_quantity:integer`.  ","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"WHRANKY"},"content":"- **Portfolio model** linking users to owned stocks with attributes: `user_id:integer`, `stock_id:integer`, `quantity:integer`.  ","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"WHRANKY"},"content":"- **Transaction model** with attributes: `user_id:integer`, `stock_id:integer`, `quantity:integer`, `transaction_type:string (buy/sell)`, `price:decimal`, `timestamp:datetime`.","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"WHRANKY"},"content":"These models handle core financial data, ownership tracking, and transaction history.","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"WHRANKY"},"content":"### View(s)","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"WHRANKY"},"content":"The following user interfaces (views) will be required:","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"WHRANKY"},"content":"- **stocks/index.html.erb** ‚Äî displays a list of all available market stocks and a search box.  ","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"WHRANKY"},"content":"- **portfolio/show.html.erb** ‚Äî shows the user‚Äôs owned stocks, quantities, and balance.  ","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"WHRANKY"},"content":"- **transactions/new.html.erb** ‚Äî provides Buy and Sell buttons, quantity input fields, and real-time balance updates.  ","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"WHRANKY"},"content":"- **shared/partials/_stock_list.html.erb** ‚Äî a reusable component for displaying stock lists.  ","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"WHRANKY"},"content":"- **shared/partials/_alerts.html.erb** ‚Äî displays error or success messages after transactions.","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"WHRANKY"},"content":"These views ensure a clear, interactive UI for searching, buying, and selling stocks.","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"WHRANKY"},"content":"### Controller(s)","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"WHRANKY"},"content":"The following controllers and actions will manage the feature‚Äôs functionality:","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"WHRANKY"},"content":"- **StocksController**","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"WHRANKY"},"content":"  - `index` ‚Äî list available market stocks and handle search queries.  ","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"WHRANKY"},"content":"  - `refresh` ‚Äî update stock list and prices from the database.  ","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"WHRANKY"},"content":"- **PortfolioController**","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"WHRANKY"},"content":"  - `show` ‚Äî display the user‚Äôs owned stocks and balance.  ","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"WHRANKY"},"content":"- **TransactionsController**","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"WHRANKY"},"content":"  - `buy` ‚Äî handle stock purchase logic (balance deduction, quantity addition).  ","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"WHRANKY"},"content":"  - `sell` ‚Äî handle stock selling logic (balance update, stock return to market).  ","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"WHRANKY"},"content":"  - `create` ‚Äî log each completed transaction in the database.  ","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"WHRANKY"},"content":"  - `rollback` ‚Äî handle failed transactions or concurrency errors.","isFullCredit":false}],"authorContributionMap":{"WHRANKY":82}},{"path":"docs/company_management.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"Thesclhy"},"content":"# Company Management (BDD Design) ‚Äî Investra","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"Thesclhy"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"Thesclhy"},"content":"## User Story","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"Thesclhy"},"content":"As an **admin**, I want to **add and update company profiles** so that **the platform always has accurate company data for trading, analytics, and market views**.","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"Thesclhy"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"Thesclhy"},"content":"## Acceptance Criteria","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"Thesclhy"},"content":"1. Admin can create a new company with **Name**, **Ticker** (unique), and **Sector**; upon success, a confirmation message is shown.","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"Thesclhy"},"content":"2. Admin **cannot** create a company if **Ticker** already exists; an error message explains the conflict.","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"Thesclhy"},"content":"3. Admin can **edit** an existing company‚Äôs details (e.g., **Market Cap**, **Description**); upon success, a confirmation message is shown.","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"Thesclhy"},"content":"4. Non‚Äëadmin users **cannot access** the company management pages (they are redirected or see an authorization error).","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"Thesclhy"},"content":"5. Form validations: **Name** and **Ticker** are required; Ticker must be 1‚Äì8 uppercase letters/digits.","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"Thesclhy"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"Thesclhy"},"content":"## MVC Outline","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"Thesclhy"},"content":"- **Model:** `Company(name:string, ticker:string:index{unique}, sector:string, market_cap:decimal{15,2}, description:text)`  ","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"Thesclhy"},"content":"  - Validations: presence of name/ticker, uniqueness of ticker (case-insensitive), ticker format `/\\A[A-Z0-9]{1,8}\\z/`","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"Thesclhy"},"content":"- **Views:** `companies/index.html.erb`, `companies/new.html.erb`, `companies/edit.html.erb`, `companies/_form.html.erb`","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"Thesclhy"},"content":"- **Controller:** `CompaniesController` with `index`, `new`, `create`, `edit`, `update` actions; before_action to **authorize admin**","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"Thesclhy"},"content":"","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"Thesclhy"},"content":"## Notes","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"Thesclhy"},"content":"- Keep Company Management **admin‚Äëonly**. Regular users/traders should not see these pages.","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"Thesclhy"},"content":"- These specs intentionally keep scope small and testable for the BDD assignment.","isFullCredit":false}],"authorContributionMap":{"Thesclhy":21}},{"path":"docs/investra_features.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"WHRANKY"},"content":"# Welcome to Investra","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"WHRANKY"},"content":"## This file includes links to all the features designed for Investra","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"WHRANKY"},"content":"1. [Market Data](./market_data.md).","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"WHRANKY"},"content":"2. [Buying and Selling](./buying_and_selling.md).","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"WHRANKY"},"content":"3. [Portfolio Management](./portfolio_management.md).","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"WHRANKY"},"content":"4. [Company Management](./company_management.md).","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"WHRANKY"},"content":"5. [User Registration](./user_registration.md).","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"WHRANKY"},"content":"6. [User Login/out](./user_loginlogout.md).","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"WHRANKY"},"content":"7. [Portfolio Visualization](./portfolio_visualization.md).","isFullCredit":false}],"authorContributionMap":{"WHRANKY":10}},{"path":"docs/market_data.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"MMMMMaasd"},"content":"# Feature: Market Data","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"MMMMMaasd"},"content":"# Designer: Michael Bian, zb2253","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"MMMMMaasd"},"content":"","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"MMMMMaasd"},"content":"## Task 1: Define Feature with a User Story","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"MMMMMaasd"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"MMMMMaasd"},"content":"## User Story (Connextra)","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"MMMMMaasd"},"content":"As an stock trader (or general user),","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"MMMMMaasd"},"content":"I want to view complete market data for a company(company information, historical prices, price trend graphs, recent news and ML prediction)","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"MMMMMaasd"},"content":"so that I can quickly evaluate a stock and reference on related news and model predictions.","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"MMMMMaasd"},"content":"","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"MMMMMaasd"},"content":"## Acceptance Criteria (SMART)","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"MMMMMaasd"},"content":"1. Happy path: Users can open the stock list page and click on a single stock to enter its details page, which displays information such as the company name and current stock price.","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"MMMMMaasd"},"content":"2. Price trend graph: The current stock details page displays a price trend graph and provides controls for switching timeframes between day, week, month, and year. When the user selects a specific timeframe, the graph updates to show only prices within the selected timeframe.","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"MMMMMaasd"},"content":"3. Machine Learning Predictions (including sad path): The stock detail page displays the current live price, a list of recent historical prices, and a link to the machine learning model\u0027s prediction (including summary text). If a model prediction is unavailable, a friendly \"Prediction Not Available\" message appears in the Forecast section.","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"MMMMMaasd"},"content":"4. Related news (include sad path): The stock details page lists the latest news related to the stock, with a link to the original article for each news item. If there is no relevant news for the company, the page will display a friendly \"No latest news\" prompt.","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"MMMMMaasd"},"content":"5. Prices are updated at a configurable interval (every 60 seconds) and reflected when the page is refreshed. In testing, we simulate this behavior by creating a new price record or news item and reloading the page; the page should display the latest data.","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"MMMMMaasd"},"content":"","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"MMMMMaasd"},"content":"## Task 2: Outline the MVC Components","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"MMMMMaasd"},"content":"","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"MMMMMaasd"},"content":"## Models","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"MMMMMaasd"},"content":"- A `Stock` model with `ticker:string`, `company_name:string`, `sector:string`, `nasdaq: string` and `description:text` attributes. ","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"MMMMMaasd"},"content":"- A `PricePoint`model with `stock_id:integer`, `price:decimal, precision: 12, scale: 4` and `recorded_at:datetime` attributes.","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"MMMMMaasd"},"content":"- A `News` model with `stock_id:integer`, `title:string`, `url:string`, `time_pblished:datetime`, `place_pblished:string` and `summary:text` attributes.","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"MMMMMaasd"},"content":"- A `Prediction`model with `stock_id:integer`, `predicted_price:decimal`, `horizon:integer` (based on num of days), `generated_at:datetime`, `confidence:float` and `model_used:string` attributes.","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"MMMMMaasd"},"content":"","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"MMMMMaasd"},"content":"## Views","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"MMMMMaasd"},"content":"- A `stocks/index.html.erb` view ‚Äî lists all stocks we are following; each shows the current price and a link to more information.","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"MMMMMaasd"},"content":"- A `stocks/show.html.erb` view ‚Äî stock detail page that includes, company header (name, ticker), current price and last updated timestamp, price trend graph with timeframe controls, small historical price table, ML prediction section, histrocial news list.","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"MMMMMaasd"},"content":"","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"MMMMMaasd"},"content":"## Controllers (Avoid Fat Controller)","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"MMMMMaasd"},"content":"- A `StocksController` with `index` (shows available stocks) and `show` (displays the stock detail page with all the including data) actions","isFullCredit":false}],"authorContributionMap":{"MMMMMaasd":31}},{"path":"docs/portfolio_management.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"ChrisBrasil10"},"content":"# Feature: Simulate Sell Value","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"ChrisBrasil10"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"ChrisBrasil10"},"content":"## User Story","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"ChrisBrasil10"},"content":"**As a** portfolio owner  ","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"ChrisBrasil10"},"content":"**I want** to simulate how much I would earn if I sold my entire portfolio now  ","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"ChrisBrasil10"},"content":"**So that** I can make informed decisions about whether to sell or hold my investments after considering taxes and transaction fees  ","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"ChrisBrasil10"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"ChrisBrasil10"},"content":"---","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"ChrisBrasil10"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"ChrisBrasil10"},"content":"## Acceptance Criteria","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"ChrisBrasil10"},"content":"","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"ChrisBrasil10"},"content":"1. **Display Total Value**  ","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"ChrisBrasil10"},"content":"   - When the user selects **\"Simulate Sell Value\"**, the system calculates and displays the total current value of all stocks in their portfolio based on the latest market prices.","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"ChrisBrasil10"},"content":"","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"ChrisBrasil10"},"content":"2. **Include Taxes and Fees**  ","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"ChrisBrasil10"},"content":"   - The system deducts a predefined **tax rate** (e.g., 15%) and a **fixed transaction fee** (e.g., \\$20) from the total to show the **net profit after deductions**.","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"ChrisBrasil10"},"content":"","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"ChrisBrasil10"},"content":"3. **Detailed Breakdown**  ","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"ChrisBrasil10"},"content":"   - The result must include:","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"ChrisBrasil10"},"content":"     - Gross portfolio value  ","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"ChrisBrasil10"},"content":"     - Taxes deducted  ","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"ChrisBrasil10"},"content":"     - Fees deducted  ","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"ChrisBrasil10"},"content":"     - Final amount receivable after deductions  ","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"ChrisBrasil10"},"content":"","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"ChrisBrasil10"},"content":"4. **Error Handling (Sad Path)**  ","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"ChrisBrasil10"},"content":"   - If the portfolio is empty or market data is unavailable, show:  ","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"ChrisBrasil10"},"content":"     \u003e *‚ÄúSimulation unavailable ‚Äî please check your portfolio or try again later.‚Äù*","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"ChrisBrasil10"},"content":"","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"ChrisBrasil10"},"content":"5. **Confirmation Message**  ","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"ChrisBrasil10"},"content":"   - After a successful simulation, show:  ","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"ChrisBrasil10"},"content":"     \u003e *‚ÄúIf you sold your portfolio today, your estimated return after taxes and fees would be \\$XX,XXX.XX.‚Äù*","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"ChrisBrasil10"},"content":"","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"ChrisBrasil10"},"content":"---","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"ChrisBrasil10"},"content":"","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"ChrisBrasil10"},"content":"## MVC Component Outline","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"ChrisBrasil10"},"content":"","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"ChrisBrasil10"},"content":"### **Model(s)**","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"ChrisBrasil10"},"content":"- **`Portfolio`**","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"ChrisBrasil10"},"content":"  - Associations: `has_many :stocks`, `has_one :credit_line`","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"ChrisBrasil10"},"content":"  - Methods:","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"ChrisBrasil10"},"content":"    - `simulate_sell_value` ‚Üí Computes  ","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"ChrisBrasil10"},"content":"      `total \u003d Œ£(stock.quantity √ó stock.current_price) ‚àí tax ‚àí fees`","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"ChrisBrasil10"},"content":"- **`Stock`**","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"ChrisBrasil10"},"content":"  - Attributes:  ","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"ChrisBrasil10"},"content":"    - `name:string`  ","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"ChrisBrasil10"},"content":"    - `quantity:integer`  ","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"ChrisBrasil10"},"content":"    - `current_price:decimal`","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"ChrisBrasil10"},"content":"- **`Transaction`** *(for simulated sells)*","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"ChrisBrasil10"},"content":"  - Attributes:  ","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"ChrisBrasil10"},"content":"    - `sell_value:decimal`  ","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"ChrisBrasil10"},"content":"    - `taxes:decimal`  ","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"ChrisBrasil10"},"content":"    - `fees:decimal`  ","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"ChrisBrasil10"},"content":"    - `net_value:decimal`","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"ChrisBrasil10"},"content":"","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"ChrisBrasil10"},"content":"---","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"ChrisBrasil10"},"content":"","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"ChrisBrasil10"},"content":"### **View(s)**","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"ChrisBrasil10"},"content":"- **`/portfolio/show.html.erb`**","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"ChrisBrasil10"},"content":"  - Displays ‚ÄúSimulate Sell Value‚Äù button and result section.","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"ChrisBrasil10"},"content":"- **`/portfolio/_simulation_result.html.erb`**","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"ChrisBrasil10"},"content":"  - Partial rendering breakdown of gross value, taxes, fees, and final net value.","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"ChrisBrasil10"},"content":"- Inline **error messages** appear under the portfolio summary when simulation fails.","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"ChrisBrasil10"},"content":"","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"ChrisBrasil10"},"content":"---","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"ChrisBrasil10"},"content":"","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"ChrisBrasil10"},"content":"### **Controller(s)**","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"ChrisBrasil10"},"content":"- **`PortfoliosController`**","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"ChrisBrasil10"},"content":"  - `show` ‚Üí Renders portfolio summary and simulation button.  ","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"ChrisBrasil10"},"content":"  - `simulate_sell` ‚Üí POST endpoint that calls `Portfolio#simulate_sell_value`, then renders the result or error.","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"ChrisBrasil10"},"content":"","isFullCredit":false}],"authorContributionMap":{"ChrisBrasil10":70}},{"path":"docs/user_loginlogout.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"saniaawale"},"content":"# User Registration Feature","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"saniaawale"},"content":"**Sania Awale**","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"saniaawale"},"content":"**Investra Trading Platform**","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"saniaawale"},"content":"## User Story","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"saniaawale"},"content":"**As a** registered user of the Investra platform  ","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"saniaawale"},"content":"**I want to** log in with my email and password and log out when finished  ","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"saniaawale"},"content":"**So that** I can securely access my account and protect my information","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"saniaawale"},"content":"### Acceptance Criteria ","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"saniaawale"},"content":"### 1. Successful Login with Role Based Redirection","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"saniaawale"},"content":"Registered users can log in with their email and password. Upon successful authentication, a session is created and the user is redirected to role-appropriate dashboard. Invalid credentials display \"Invalid email or password\" error.","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"saniaawale"},"content":"### 2. Login failed with Invalid Credentials","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"saniaawale"},"content":"if a user attempts to log in with incorrect email or password, the system displays \"Invalid email or password\" error message and the user remains on the login page.","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"saniaawale"},"content":"### 3. Successful Logout from Any Page","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"saniaawale"},"content":"Users can successfully log out using the logout button from any page. Logout completely destroys the user session and redirects to the login page.","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"saniaawale"},"content":"### 5. Session Management","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"saniaawale"},"content":"User session persists across page navigation while logged in. Session is destroyed upon logout.","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"saniaawale"},"content":"## MVC Components","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"saniaawale"},"content":"### Models","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"saniaawale"},"content":"* A `User` model with `email:string`, `password_digest:string`, `first_name:string`, `last_name:string`, `phone_number:string`, and `company_id:integer` attributes.","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"saniaawale"},"content":"* A `Role` model with `name:string` and `description:text` attributes.","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"saniaawale"},"content":"* A `UserRole` model with `user_id:integer` and `role_id:integer` attributes (join table for many-to-many relationship).","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"saniaawale"},"content":"* A `Company` model with `name:string` and `domain:string` attributes.","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"saniaawale"},"content":"### Views","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"saniaawale"},"content":"* A `sessions/new.html.erb` view ‚Äî displays login form with fields for email and password.","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"saniaawale"},"content":"* A `dashboard/index.html.erb` view ‚Äî Trader dashboard ","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"saniaawale"},"content":"* A `dashboard/associate.html.erb` view ‚Äî Associate Trader dashboard ","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"saniaawale"},"content":"* A `dashboard/manager.html.erb` view ‚Äî Portfolio Manager  dashboard","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"saniaawale"},"content":"* A `dashboard/admin.html.erb` view ‚Äî System Administrator panel ","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"saniaawale"},"content":"### Controllers","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"saniaawale"},"content":"* A `SessionsController` with `new` (shows login form), `create` (processes login and creates session), and `destroy` (logs out user and destroys session) actions.","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"saniaawale"},"content":"* A `DashboardController` with `index` (displays role-appropriate dashboard based on current user\u0027s role) action.","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"saniaawale"},"content":"* An `ApplicationController` - base controller with helper methods for authentication (`current_user`, `logged_in?`, `require_login`) and authorization (`authorize_role`).","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false}],"authorContributionMap":{"saniaawale":58}},{"path":"docs/user_registration.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"saniaawale"},"content":"# User Registration Feature","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"saniaawale"},"content":"**Sania Awale**","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"saniaawale"},"content":"**Investra Trading Platform**","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"saniaawale"},"content":"## User Story","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"saniaawale"},"content":"**As a** new visitor to the Investra platform  ","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"saniaawale"},"content":"**I want to** register for an account with my email and password  ","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"saniaawale"},"content":"**So that** I can access the trading platform and manage my investments","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"saniaawale"},"content":"### Acceptance Criteria","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"saniaawale"},"content":"### 1. Happy Successful registration with unique email ","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"saniaawale"},"content":"Users can register with a unique email, password (minimum 8 characters), password confirmation, first name, and last name. The system assigns the default \"Trader\" role upon successful registration. If the email is already taken, the system displays \"Email is already taken\" error message.","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"saniaawale"},"content":"### 2. Password Length Validation","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"saniaawale"},"content":"If the password is less than 8 characters, the system displays \"Password is too short (minimum is 8 characters)\" error message.","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"saniaawale"},"content":"### 3. Password Confirmation Matching","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"saniaawale"},"content":"If password and password confirmation do not match, the system displays \"Password confirmation doesn\u0027t match\" error message.","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"saniaawale"},"content":"### 4. Secure Password Storage","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"saniaawale"},"content":"Passwords are hashed before storage using bcrypt. Plain text passwords are never stored in the database.","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"saniaawale"},"content":"### 5. Automatic Role Assignment","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"saniaawale"},"content":"Upon successful registration, the system automatically assigns the default \"Trader\" role to the new user and logs them in automatically, redirecting to the dashboard.","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"saniaawale"},"content":"### Models","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"saniaawale"},"content":"* A `User` model with `email:string`, `password_digest:string`, `first_name:string`, `last_name:string`, `phone_number:string`, and `company_id:integer` attributes.","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"saniaawale"},"content":"* A `Role` model with `name:string` attributes.","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"saniaawale"},"content":"* A `UserRole` model with `user_id:integer` and `role_id:integer` attributes.","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"saniaawale"},"content":"* A `Company` model with `name:string` and `domain:string` attributes.","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"saniaawale"},"content":"### Views","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"saniaawale"},"content":"* A `users/new.html.erb` view ‚Äî displays registration form with fields for email, password, password confirmation, first name, and last name.","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"saniaawale"},"content":"### Controllers","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"saniaawale"},"content":"* A `UsersController` with `new` (shows registration form) and `create` (processes registration) actions.","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"saniaawale"},"content":"","isFullCredit":false}],"authorContributionMap":{"saniaawale":46}},{"path":"investra/README.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"Thesclhy"},"content":"# Investra - Local Docker Runbook","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"Thesclhy"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"Thesclhy"},"content":"This Rails app is containerized with Docker Compose. Follow the steps below to bring up the API and its MySQL database locally.","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"Thesclhy"},"content":"","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"Thesclhy"},"content":"## Prerequisites","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"Thesclhy"},"content":"- Docker Desktop (or Docker Engine) with the Compose plugin","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"Thesclhy"},"content":"- Ports 3000 (Rails) and 3307 (MySQL) free on your host","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"Thesclhy"},"content":"- Run all commands from `investra/`","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"Thesclhy"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"Thesclhy"},"content":"## One-time build and start","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"Thesclhy"},"content":"```bash","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"Thesclhy"},"content":"docker compose up --build","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"Thesclhy"},"content":"```","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"Thesclhy"},"content":"- The `web` container installs gems (`bundle install`), prepares the test DB, and starts Rails on port 3000.","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"Thesclhy"},"content":"- The `db` container seeds MySQL with an `investra` user via `docker-init.sql` and exposes 3307 on your host.","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"Thesclhy"},"content":"- Logs stream in the foreground. Stop with `Ctrl+C`.","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"Thesclhy"},"content":"","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"Thesclhy"},"content":"To start in the background:","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"Thesclhy"},"content":"```bash","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"Thesclhy"},"content":"docker compose up -d","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"Thesclhy"},"content":"docker compose logs -f web","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"Thesclhy"},"content":"```","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"Thesclhy"},"content":"","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"Thesclhy"},"content":"## Access","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"Thesclhy"},"content":"- Rails app: http://localhost:3000","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"Thesclhy"},"content":"- MySQL: host `127.0.0.1`, port `3307`, user `investra`, password `investra`, root password `root`","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"Thesclhy"},"content":"- Default DB names: `investra_development` (initialized by MySQL) and `investra_test` (used by `db:test:prepare` when the web container boots)","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"Thesclhy"},"content":"","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"Thesclhy"},"content":"## Default admin (dev/test only)","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"Thesclhy"},"content":"- Email: `admin@example.com`","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"Thesclhy"},"content":"- Password: `password`","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"Thesclhy"},"content":"- Auto-created on boot in development/test via `config/initializers/default_admin.rb`; use it to log in at `/login` and access `/companies`.","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"Thesclhy"},"content":"","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"Thesclhy"},"content":"## Useful commands","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"Thesclhy"},"content":"- Stop and clean containers (keep volumes): `docker compose down`","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"Thesclhy"},"content":"- Reset DB data: `docker compose down -v`","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"Thesclhy"},"content":"- Run Rails/RSpec inside the app container: `docker compose run --rm web bundle exec rspec`","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"Thesclhy"},"content":"- Check DB health: `docker compose exec db mysql -uroot -proot -e \"SHOW DATABASES;\"`","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"Thesclhy"},"content":"","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"Thesclhy"},"content":"## Market data configuration","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"Thesclhy"},"content":"- Set `MASSIVE_API_KEY` to use Massive for live quotes. Requests authenticate with `Authorization: Bearer \u003ckey\u003e` per the Massive REST Quickstart. Without it, the app falls back to Yahoo Finance.","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"Thesclhy"},"content":"- Optionally override the base URL (defaults to `https://api.polygon.io`) with `MASSIVE_API_BASE` if your account uses a different Massive endpoint.","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"Thesclhy"},"content":"- Example for Compose: `MASSIVE_API_KEY\u003dyour_key_here docker compose up --build`","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"Thesclhy"},"content":"","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"Thesclhy"},"content":"## Running tests in Docker","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"Thesclhy"},"content":"- RSpec (all): `docker compose run --rm web bundle exec rspec`","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"Thesclhy"},"content":"- Cucumber (all): `docker compose run --rm web bundle exec cucumber`","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"Thesclhy"},"content":"- Single feature: `docker compose run --rm web bundle exec cucumber features/company_management.feature`","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"Thesclhy"},"content":"- Note: commands run against the `test` environment/database inside the containers.","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"Thesclhy"},"content":"","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"Thesclhy"},"content":"## Troubleshooting","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"Thesclhy"},"content":"- If the web container waits for DB, ensure port 3307 is free and try `docker compose down -v \u0026\u0026 docker compose up --build`.","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"Thesclhy"},"content":"- If you change gems, rebuild the image: `docker compose build web`.","isFullCredit":false}],"authorContributionMap":{"Thesclhy":53}},{"path":"investra/public/robots.txt","fileType":"txt","lines":[{"lineNumber":1,"author":{"gitId":"Thesclhy"},"content":"# See https://www.robotstxt.org/robotstxt.html for documentation on how to use the robots.txt file","isFullCredit":false}],"authorContributionMap":{"Thesclhy":1}},{"path":"investra/wait-for-it.sh","fileType":"sh","lines":[{"lineNumber":1,"author":{"gitId":"WHRANKY"},"content":"#!/usr/bin/env bash","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"WHRANKY"},"content":"# Use this script to test if a given TCP host/port are available","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"WHRANKY"},"content":"WAITFORIT_cmdname\u003d${0##*/}","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"WHRANKY"},"content":"echoerr() { if [[ $WAITFORIT_QUIET -ne 1 ]]; then echo \"$@\" 1\u003e\u00262; fi }","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"WHRANKY"},"content":"usage()","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"WHRANKY"},"content":"{","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"WHRANKY"},"content":"    cat \u003c\u003c USAGE \u003e\u00262","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"WHRANKY"},"content":"Usage:","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"WHRANKY"},"content":"    $WAITFORIT_cmdname host:port [-s] [-t timeout] [-- command args]","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"WHRANKY"},"content":"    -h HOST | --host\u003dHOST       Host or IP under test","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"WHRANKY"},"content":"    -p PORT | --port\u003dPORT       TCP port under test","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"WHRANKY"},"content":"                                Alternatively, you specify the host and port as host:port","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"WHRANKY"},"content":"    -s | --strict               Only execute subcommand if the test succeeds","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"WHRANKY"},"content":"    -q | --quiet                Don\u0027t output any status messages","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"WHRANKY"},"content":"    -t TIMEOUT | --timeout\u003dTIMEOUT","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"WHRANKY"},"content":"                                Timeout in seconds, zero for no timeout","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"WHRANKY"},"content":"    -- COMMAND ARGS             Execute command with args after the test finishes","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"WHRANKY"},"content":"USAGE","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"WHRANKY"},"content":"    exit 1","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"WHRANKY"},"content":"}","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"WHRANKY"},"content":"wait_for()","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"WHRANKY"},"content":"{","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"WHRANKY"},"content":"    if [[ $WAITFORIT_TIMEOUT -gt 0 ]]; then","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"WHRANKY"},"content":"        echoerr \"$WAITFORIT_cmdname: waiting $WAITFORIT_TIMEOUT seconds for $WAITFORIT_HOST:$WAITFORIT_PORT\"","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"WHRANKY"},"content":"    else","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"WHRANKY"},"content":"        echoerr \"$WAITFORIT_cmdname: waiting for $WAITFORIT_HOST:$WAITFORIT_PORT without a timeout\"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"WHRANKY"},"content":"    fi","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"WHRANKY"},"content":"    WAITFORIT_start_ts\u003d$(date +%s)","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"WHRANKY"},"content":"    while :","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"WHRANKY"},"content":"    do","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"WHRANKY"},"content":"        if [[ $WAITFORIT_ISBUSY -eq 1 ]]; then","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"WHRANKY"},"content":"            nc -z $WAITFORIT_HOST $WAITFORIT_PORT","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"WHRANKY"},"content":"            WAITFORIT_result\u003d$?","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"WHRANKY"},"content":"        else","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"WHRANKY"},"content":"            (echo -n \u003e /dev/tcp/$WAITFORIT_HOST/$WAITFORIT_PORT) \u003e/dev/null 2\u003e\u00261","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"WHRANKY"},"content":"            WAITFORIT_result\u003d$?","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"WHRANKY"},"content":"        fi","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"WHRANKY"},"content":"        if [[ $WAITFORIT_result -eq 0 ]]; then","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"WHRANKY"},"content":"            WAITFORIT_end_ts\u003d$(date +%s)","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"WHRANKY"},"content":"            echoerr \"$WAITFORIT_cmdname: $WAITFORIT_HOST:$WAITFORIT_PORT is available after $((WAITFORIT_end_ts - WAITFORIT_start_ts)) seconds\"","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"WHRANKY"},"content":"            break","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"WHRANKY"},"content":"        fi","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"WHRANKY"},"content":"        sleep 1","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"WHRANKY"},"content":"    done","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"WHRANKY"},"content":"    return $WAITFORIT_result","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"WHRANKY"},"content":"}","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"WHRANKY"},"content":"wait_for_wrapper()","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"WHRANKY"},"content":"{","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"WHRANKY"},"content":"    # In order to support SIGINT during timeout: http://unix.stackexchange.com/a/57692","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"WHRANKY"},"content":"    if [[ $WAITFORIT_QUIET -eq 1 ]]; then","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"WHRANKY"},"content":"        timeout $WAITFORIT_BUSYTIMEFLAG $WAITFORIT_TIMEOUT $0 --quiet --child --host\u003d$WAITFORIT_HOST --port\u003d$WAITFORIT_PORT --timeout\u003d$WAITFORIT_TIMEOUT \u0026","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"WHRANKY"},"content":"    else","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"WHRANKY"},"content":"        timeout $WAITFORIT_BUSYTIMEFLAG $WAITFORIT_TIMEOUT $0 --child --host\u003d$WAITFORIT_HOST --port\u003d$WAITFORIT_PORT --timeout\u003d$WAITFORIT_TIMEOUT \u0026","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"WHRANKY"},"content":"    fi","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"WHRANKY"},"content":"    WAITFORIT_PID\u003d$!","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"WHRANKY"},"content":"    trap \"kill -INT -$WAITFORIT_PID\" INT","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"WHRANKY"},"content":"    wait $WAITFORIT_PID","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"WHRANKY"},"content":"    WAITFORIT_RESULT\u003d$?","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"WHRANKY"},"content":"    if [[ $WAITFORIT_RESULT -ne 0 ]]; then","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"WHRANKY"},"content":"        echoerr \"$WAITFORIT_cmdname: timeout occurred after waiting $WAITFORIT_TIMEOUT seconds for $WAITFORIT_HOST:$WAITFORIT_PORT\"","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"WHRANKY"},"content":"    fi","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"WHRANKY"},"content":"    return $WAITFORIT_RESULT","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"WHRANKY"},"content":"}","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"WHRANKY"},"content":"# process arguments","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"WHRANKY"},"content":"while [[ $# -gt 0 ]]","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"WHRANKY"},"content":"do","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"WHRANKY"},"content":"    case \"$1\" in","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"WHRANKY"},"content":"        *:* )","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"WHRANKY"},"content":"        WAITFORIT_hostport\u003d(${1//:/ })","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"WHRANKY"},"content":"        WAITFORIT_HOST\u003d${WAITFORIT_hostport[0]}","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"WHRANKY"},"content":"        WAITFORIT_PORT\u003d${WAITFORIT_hostport[1]}","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"WHRANKY"},"content":"        shift 1","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"WHRANKY"},"content":"        ;;","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"WHRANKY"},"content":"        --child)","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"WHRANKY"},"content":"        WAITFORIT_CHILD\u003d1","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"WHRANKY"},"content":"        shift 1","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"WHRANKY"},"content":"        ;;","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"WHRANKY"},"content":"        -q | --quiet)","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"WHRANKY"},"content":"        WAITFORIT_QUIET\u003d1","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"WHRANKY"},"content":"        shift 1","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"WHRANKY"},"content":"        ;;","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"WHRANKY"},"content":"        -s | --strict)","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"WHRANKY"},"content":"        WAITFORIT_STRICT\u003d1","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"WHRANKY"},"content":"        shift 1","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"WHRANKY"},"content":"        ;;","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"WHRANKY"},"content":"        -h)","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"WHRANKY"},"content":"        WAITFORIT_HOST\u003d\"$2\"","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"WHRANKY"},"content":"        if [[ $WAITFORIT_HOST \u003d\u003d \"\" ]]; then break; fi","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"WHRANKY"},"content":"        shift 2","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"WHRANKY"},"content":"        ;;","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"WHRANKY"},"content":"        --host\u003d*)","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"WHRANKY"},"content":"        WAITFORIT_HOST\u003d\"${1#*\u003d}\"","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"WHRANKY"},"content":"        shift 1","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"WHRANKY"},"content":"        ;;","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"WHRANKY"},"content":"        -p)","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"WHRANKY"},"content":"        WAITFORIT_PORT\u003d\"$2\"","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"WHRANKY"},"content":"        if [[ $WAITFORIT_PORT \u003d\u003d \"\" ]]; then break; fi","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"WHRANKY"},"content":"        shift 2","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"WHRANKY"},"content":"        ;;","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"WHRANKY"},"content":"        --port\u003d*)","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"WHRANKY"},"content":"        WAITFORIT_PORT\u003d\"${1#*\u003d}\"","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"WHRANKY"},"content":"        shift 1","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"WHRANKY"},"content":"        ;;","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"WHRANKY"},"content":"        -t)","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"WHRANKY"},"content":"        WAITFORIT_TIMEOUT\u003d\"$2\"","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"WHRANKY"},"content":"        if [[ $WAITFORIT_TIMEOUT \u003d\u003d \"\" ]]; then break; fi","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"WHRANKY"},"content":"        shift 2","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"WHRANKY"},"content":"        ;;","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"WHRANKY"},"content":"        --timeout\u003d*)","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"WHRANKY"},"content":"        WAITFORIT_TIMEOUT\u003d\"${1#*\u003d}\"","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"WHRANKY"},"content":"        shift 1","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"WHRANKY"},"content":"        ;;","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"WHRANKY"},"content":"        --)","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"WHRANKY"},"content":"        shift","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"WHRANKY"},"content":"        WAITFORIT_CLI\u003d(\"$@\")","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"WHRANKY"},"content":"        break","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"WHRANKY"},"content":"        ;;","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"WHRANKY"},"content":"        --help)","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"WHRANKY"},"content":"        usage","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"WHRANKY"},"content":"        ;;","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"WHRANKY"},"content":"        *)","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"WHRANKY"},"content":"        echoerr \"Unknown argument: $1\"","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"WHRANKY"},"content":"        usage","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"WHRANKY"},"content":"        ;;","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"WHRANKY"},"content":"    esac","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"WHRANKY"},"content":"done","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"WHRANKY"},"content":"if [[ \"$WAITFORIT_HOST\" \u003d\u003d \"\" || \"$WAITFORIT_PORT\" \u003d\u003d \"\" ]]; then","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"WHRANKY"},"content":"    echoerr \"Error: you need to provide a host and port to test.\"","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"WHRANKY"},"content":"    usage","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"WHRANKY"},"content":"fi","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"WHRANKY"},"content":"WAITFORIT_TIMEOUT\u003d${WAITFORIT_TIMEOUT:-15}","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"WHRANKY"},"content":"WAITFORIT_STRICT\u003d${WAITFORIT_STRICT:-0}","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"WHRANKY"},"content":"WAITFORIT_CHILD\u003d${WAITFORIT_CHILD:-0}","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"WHRANKY"},"content":"WAITFORIT_QUIET\u003d${WAITFORIT_QUIET:-0}","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"WHRANKY"},"content":"# Check to see if timeout is from busybox?","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"WHRANKY"},"content":"WAITFORIT_TIMEOUT_PATH\u003d$(type -p timeout)","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"WHRANKY"},"content":"WAITFORIT_TIMEOUT_PATH\u003d$(realpath $WAITFORIT_TIMEOUT_PATH 2\u003e/dev/null || readlink -f $WAITFORIT_TIMEOUT_PATH)","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"WHRANKY"},"content":"WAITFORIT_BUSYTIMEFLAG\u003d\"\"","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"WHRANKY"},"content":"if [[ $WAITFORIT_TIMEOUT_PATH \u003d~ \"busybox\" ]]; then","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"WHRANKY"},"content":"    WAITFORIT_ISBUSY\u003d1","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"WHRANKY"},"content":"    # Check if busybox timeout uses -t flag","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"WHRANKY"},"content":"    # (recent Alpine versions don\u0027t support -t anymore)","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"WHRANKY"},"content":"    if timeout \u0026\u003e/dev/stdout | grep -q -e \u0027-t \u0027; then","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"WHRANKY"},"content":"        WAITFORIT_BUSYTIMEFLAG\u003d\"-t\"","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"WHRANKY"},"content":"    fi","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"WHRANKY"},"content":"else","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"WHRANKY"},"content":"    WAITFORIT_ISBUSY\u003d0","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"WHRANKY"},"content":"fi","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"WHRANKY"},"content":"if [[ $WAITFORIT_CHILD -gt 0 ]]; then","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"WHRANKY"},"content":"    wait_for","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"WHRANKY"},"content":"    WAITFORIT_RESULT\u003d$?","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"WHRANKY"},"content":"    exit $WAITFORIT_RESULT","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"WHRANKY"},"content":"else","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"WHRANKY"},"content":"    if [[ $WAITFORIT_TIMEOUT -gt 0 ]]; then","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"WHRANKY"},"content":"        wait_for_wrapper","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"WHRANKY"},"content":"        WAITFORIT_RESULT\u003d$?","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"WHRANKY"},"content":"    else","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"WHRANKY"},"content":"        wait_for","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"WHRANKY"},"content":"        WAITFORIT_RESULT\u003d$?","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"WHRANKY"},"content":"    fi","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"WHRANKY"},"content":"fi","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"WHRANKY"},"content":"","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"WHRANKY"},"content":"if [[ $WAITFORIT_CLI !\u003d \"\" ]]; then","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"WHRANKY"},"content":"    if [[ $WAITFORIT_RESULT -ne 0 \u0026\u0026 $WAITFORIT_STRICT -eq 1 ]]; then","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"WHRANKY"},"content":"        echoerr \"$WAITFORIT_cmdname: strict mode, refusing to execute subprocess\"","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"WHRANKY"},"content":"        exit $WAITFORIT_RESULT","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"WHRANKY"},"content":"    fi","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"WHRANKY"},"content":"    exec \"${WAITFORIT_CLI[@]}\"","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"WHRANKY"},"content":"else","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"WHRANKY"},"content":"    exit $WAITFORIT_RESULT","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"WHRANKY"},"content":"fi","isFullCredit":false}],"authorContributionMap":{"WHRANKY":182}}]
